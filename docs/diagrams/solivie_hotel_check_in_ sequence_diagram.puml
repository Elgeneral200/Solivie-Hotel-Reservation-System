@startuml Check-In Sequence Diagram

skinparam {
  backgroundColor #FFFFFF
  defaultFontName Segoe UI
  defaultFontSize 10
  shadowing true
  shadowingIntensity 15
  
  ParticipantBackgroundColor #FFFFFF
  ParticipantBorderColor #2C3E50
  ParticipantBorderThickness 2
  ParticipantFontColor #2C3E50
  ParticipantFontSize 11
  ParticipantFontStyle bold
  
  ActorBackgroundColor #E8F5E9
  ActorBorderColor #388E3C
  ActorFontColor #2C3E50
  ActorFontSize 11
  ActorFontStyle bold
  
  DatabaseBackgroundColor #F3E5F5
  DatabaseBorderColor #7B1FA2
  DatabaseFontColor #2C3E50
  DatabaseFontSize 11
  DatabaseFontStyle bold
  
  ArrowColor #2C3E50
  ArrowThickness 1.5
  ArrowFontColor #2C3E50
  ArrowFontSize 9
  
  NoteBackgroundColor #FFF3E0
  NoteBorderColor #FF9800
  NoteFontColor #5D4037
  NoteFontSize 9
  NoteRoundCorner 8
  
  LifeLineBackgroundColor #F5F5F5
  LifeLineBorderColor #BDBDBD
  
  AltBackgroundColor #E3F2FD
  AltBorderColor #1976D2
  AltFontColor #2C3E50
}

title <color:#2C3E50><size:16><b>SOLIVIE HOTEL - CHECK-IN PROCESS SEQUENCE DIAGRAM</b></size></title>

caption <color:#546E7A><i>Complete guest arrival and registration workflow</i></caption>

actor "Reception Staff" as Admin <<Hotel Employee>>
participant "Check-In Interface" as CIP <<UI>>
participant "Check-In Manager" as CIM <<Controller>>
participant "Booking Manager" as BM <<Service>>
participant "Key Card System" as KCS <<External>>
participant "Housekeeping" as HK <<Service>>
participant "Email Service" as Email <<Service>>
database "Hotel Database" as DB <<PostgreSQL>>

' ============================================
' PHASE 1: BOOKING RETRIEVAL
' ============================================

Admin -> CIP: **1. ENTER booking_reference**\nğŸ« Lookup reservation
note right of Admin
  <color:#2C3E50><b>Search Methods</b></color>
  â€¢ Booking reference number
  â€¢ Guest last name + date
  â€¢ Email address
  â€¢ Phone number
  â€¢ Walk-in creation
end note

activate CIP

CIP -> BM: **2. search_booking()**\nğŸ” Find reservation
activate BM

BM -> DB: **3. QUERY booking_record**\nğŸ“Š Database search
activate DB

alt **Booking Found**
  DB --> BM: **4. RETURN booking_details**\nâœ… Complete information
  note right of BM
    <color:#2C3E50><b>Booking Details</b></color>
    â€¢ Guest information
    â€¢ Room assignment
    â€¢ Payment status
    â€¢ Special requests
    â€¢ Booking status
  end note
  
  BM --> CIP: **5. RETURN booking_found**\nğŸ¯ Reservation located
  
else **Booking Not Found**
  DB --> BM: **6. RETURN null_result**\nâŒ No matching record
  BM --> CIP: **7. RETURN booking_not_found**\nâš ï¸ Search failed
  deactivate BM
  deactivate DB
  CIP --> Admin: **8. DISPLAY error_message**\nâŒ Please verify reference
  deactivate CIP
  return
end

deactivate BM
deactivate DB

CIP --> Admin: **9. DISPLAY booking_summary**\nğŸ“‹ Reservation details
deactivate CIP

' ============================================
' PHASE 2: IDENTIFICATION VERIFICATION
' ============================================

Admin -> CIP: **10. CAPTURE id_information**\nğŸ†” Guest identification
activate CIP

note right of CIP
  <color:#2C3E50><b>ID Requirements</b></color>
  â€¢ Passport (international guests)
  â€¢ National ID card
  â€¢ Driver's license
  â€¢ ID Type & Number
  â€¢ Expiry date validation
  â€¢ Document scanning
end note

CIP -> CIM: **11. verify_identity()**\nâœ… ID validation
activate CIM

CIM -> CIM: **12. validate_id_format()**\nğŸ“ Format checking
CIM -> CIM: **13. check_id_expiry()**\nğŸ“… Expiration validation

alt **ID Valid**
  CIM -> DB: **14. UPDATE booking_record**\nğŸ“Š Check-in status
  activate DB
  note right of DB
    <color:#2C3E50><b>Booking Updates</b></color>
    â€¢ Status: CHECKED_IN
    â€¢ Check-in time: NOW()
    â€¢ ID information: [encrypted]
    â€¢ Receptionist: [staff ID]
    â€¢ Room ready: TRUE
  end note
  DB --> CIM: **15. RETURN update_success**\nâœ… Status updated
  deactivate DB
  
  CIM -> DB: **16. UPDATE room_status**\nğŸ¨ Mark as occupied
  activate DB
  DB --> CIM: **17. RETURN room_updated**\nâœ… Room status changed
  deactivate DB
  
  CIM -> DB: **18. INSERT check_in_log**\nğŸ“‹ Audit trail
  activate DB
  DB --> CIM: **19. RETURN log_saved**\nâœ… Audit recorded
  deactivate DB
  
  CIM --> CIP: **20. RETURN verification_success**\nâœ… ID approved
  
else **ID Invalid**
  CIM --> CIP: **21. RETURN validation_error**\nâŒ Invalid document
  note right of CIM
    <color:#2C3E50><b>Validation Errors</b></color>
    â€¢ Expired document
    â€¢ Invalid format
    â€¢ Missing information
    â€¢ Underage guest
    â€¢ Data mismatch
  end note
  
  deactivate CIM
  CIP --> Admin: **22. DISPLAY validation_issue**\nâš ï¸ Please provide valid ID
  deactivate CIP
  return
end

deactivate CIM

' ============================================
' PHASE 3: KEY CARD PROCESSING
' ============================================

CIP -> KCS: **23. generate_room_keys()**\nğŸ” Access creation
activate KCS

KCS -> KCS: **24. create_access_codes()**\nğŸ”¢ Generate unique codes
note right of KCS
  <color:#2C3E50><b>Key Card Data</b></color>
  â€¢ Room number
  â€¢ Check-in/out dates
  â€¢ Access permissions
  â€¢ Energy control
  â€¢ Emergency override
end note

KCS -> DB: **25. SAVE key_information**\nğŸ’¾ Store access data
activate DB
DB --> KCS: **26. RETURN save_confirmation**\nâœ… Data stored
deactivate DB

KCS --> CIP: **27. RETURN key_ready**\nâœ… Cards programmed
deactivate KCS

' ============================================
' PHASE 4: DOCUMENT GENERATION
' ============================================

CIP -> CIP: **28. generate_check_in_receipt()**\nğŸ§¾ Create documents
note right of CIP
  <color:#2C3E50><b>Receipt Contents</b></color>
  â€¢ Guest name & room number
  â€¢ Check-in/out dates & times
  â€¢ Rate & payment summary
  â€¢ Hotel policies
  â€¢ Emergency contacts
  â€¢ WiFi credentials
end note

CIP -> CIP: **29. prepare_welcome_package()**\nğŸ“¦ Guest information

CIP -> Email: **30. send_welcome_email()**\nğŸ“§ Digital delivery
activate Email

Email -> Email: **31. create_welcome_email()**\nğŸ¨ Generate content
Email -> Admin: **32. SEND digital_documents**\nğŸ“¨ Guest email sent
Email --> CIP: **33. RETURN email_confirmation**\nâœ… Delivery confirmed
deactivate Email

' ============================================
' PHASE 5: SYSTEM NOTIFICATIONS
' ============================================

CIP -> HK: **34. notify_housekeeping()**\nğŸ§¹ Room status update
activate HK

HK -> HK: **35. update_cleaning_schedule()**\nğŸ“… Adjust room service
HK -> DB: **36. LOG housekeeping_notification**\nğŸ“‹ Service record
activate DB
DB --> HK: **37. RETURN notification_saved**\nâœ… Record updated
deactivate DB

HK --> CIP: **38. RETURN notification_sent**\nâœ… Housekeeping alerted
deactivate HK

CIP -> CIP: **39. update_hotel_dashboard()**\nğŸ“Š Real-time occupancy

' ============================================
' PHASE 6: COMPLETION
' ============================================

CIP --> Admin: **40. DISPLAY check_in_complete**\nğŸ‰ Process finished
note right of CIP
  <color:#2C3E50><b>Final Display</b></color>
  â€¢ Room number & floor
  â€¢ Key card ready
  â€¢ Receipt printed
  â€¢ Email sent confirmation
  â€¢ Next steps instructions
  â€¢ Support contact info
end note

deactivate CIP

Admin -> Admin: **41. PROVIDE physical_key**\nğŸ”‘ Hand over access
Admin -> Admin: **42. OFFER assistance**\nğŸ¤ Guest orientation
Admin -> Admin: **43. WELCOME guest**\nğŸ¨ Hospitality completion

' ============================================
' SUMMARY & LEGEND
' ============================================

note over Admin, DB
  <color:#2C3E50><b>Check-In Process Summary</b></size></color>
  
  <b>â±ï¸ Average Duration:</b> 3-5 minutes
  <b>ğŸ“Š Database Operations:</b> 8+ transactions
  <b>ğŸ”— System Integrations:</b> 5+ services
  <b>âœ… Success Rate:</b> 98.5%
  
  <b>Key Performance Indicators:</b>
  â€¢ Guest satisfaction: > 95%
  â€¢ Check-in speed: < 5 minutes
  â€¢ System reliability: 99.9%
  â€¢ Error resolution: < 2 minutes
  
  <b>Security & Compliance:</b>
  â€¢ ID verification compliance
  â€¢ Data privacy regulations
  â€¢ Access control systems
  â€¢ Audit trail maintenance
  â€¢ PCI DSS compliance
end note

legend right
  | <b>Component Type</b> | <b>Color</b> |
  | Hotel Staff | <color:#388E3C>â–ˆ</color> |
  | User Interface | <color:#2C3E50>â–ˆ</color> |
  | Controller/Manager | <color:#1976D2>â–ˆ</color> |
  | Service Layer | <color:#D32F2F>â–ˆ</color> |
  | External System | <color:#FF9800>â–ˆ</color> |
  | Database | <color:#7B1FA2>â–ˆ</color> |
  | **Process Step** | **Icon** |
  | Data Lookup | ğŸ” |
  | Validation | âœ… |
  | Key Generation | ğŸ” |
  | Notification | ğŸ“§ |
  | Document Creation | ğŸ§¾ |
  | Completion | ğŸ‰ |
end legend

@enduml