@startuml Complete Booking Activity

skinparam {
  defaultFontName Arial
  defaultFontSize 10
  shadowing false
  backgroundColor #FFFFFF
  
  activity {
    BackgroundColor #FFFFFF
    BorderColor #2C3E50
    BorderThickness 1.5
    FontColor #2C3E50
    FontSize 11
    DiamondBackgroundColor #FFFFFF
    DiamondBorderColor #3498DB
    DiamondFontColor #2C3E50
    StartColor #27AE60
    EndColor #E74C3C
    BarColor #3498DB
  }
  
  arrow {
    Color #2C3E50
    Thickness 2
    FontColor #2C3E50
  }
  
  note {
    BackgroundColor #FFF8E1
    BorderColor #FFC107
    FontColor #5D4037
    FontSize 9
    RoundCorner 5
  }
  
  partition {
    BackgroundColor #F8F9FA
    BorderColor #3498DB
    BorderThickness 2
    FontColor #2C3E50
    FontSize 12
    FontStyle bold
    RoundCorner 10
  }
}

title <color:#2C3E50><b>Solivie Hotel - Complete Booking Process Activity Diagram</b></color>

footer Last updated: <i>November 2023</i> | <i>Version 2.0</i>

|#F0F8FF|<color:#3498DB><b>User Interaction</b></color>|
start
:Guest visits Solivie Hotel website;
note right
  <color:#2C3E50><b>Entry Point</b></color>
  Public website accessible
  Mobile responsive design
end note

if (User authenticated?) then (no)
  |#F1F8E9|<color:#27AE60><b>Authentication</b></color>|
  :Redirect to secure login page;
  :User enters email & password;
  :System validates credentials;
  
  if (Valid credentials?) then (no)
    :Display authentication error;
    :Offer password reset option;
    stop
  else (yes)
    :Create user session;
    :Update last login timestamp;
  endif
  
else (yes)
  :Validate session token;
endif

|#FFF3E0|<color:#F39C12><b>Room Discovery</b></color>|
:User accesses room search interface;
:Select check-in date from calendar;
:Select check-out date from calendar;
:Specify number of guests (1-4);
:Select room preferences (optional);

|#FFEBEE|<color:#E74C3C><b>Input Validation</b></color>|
fork
  :Validate date range logic;
fork again
  :Check against current date;
fork again
  :Verify guest capacity limits;
end fork

if (All inputs valid?) then (no)
  |#FFF3E0|
  :Display validation errors:
  - Past dates not allowed
  - Minimum stay requirements
  - Invalid date format;
  :Highlight problematic fields;
  :Provide date suggestions;
  stop
else (yes)
endif

|#F1F8E9|<color:#27AE60><b>Availability Check</b></color>|
:System queries availability database;
:Apply business rules:
  - Room maintenance
  - Overbooking limits
  - Blackout dates;

if (Rooms available?) then (no)
  |#FFF3E0|
  :Display "No availability"
  message with details;
  :Suggest alternative dates;
  :Show similar properties;
  :Offer waitlist option;
  stop
else (yes)
endif

|#E8F5E9|<color:#2ECC71><b>Room Selection</b></color>|
:Display filtered results:
  - Room types & categories
  - Real-time pricing
  - Amenities & features
  - Guest ratings & photos;

:User compares options;
:User selects preferred room;
:User clicks "Add to Cart";

|#F3E5F5|<color:#9B59B6><b>Cart Management</b></color>|
:System verifies room
still available;
:Add room to shopping cart;
:Calculate subtotal with taxes;
:Display updated cart summary;

if (Add more rooms?) then (yes)
  :Navigate back to
  search results;
  detach
else (no)
endif

|#F0F8FF|<color:#3498DB><b>Checkout Process</b></color>|
:User proceeds to secure checkout;
:Display comprehensive summary:
  - Room details & photos
  - Date range & duration
  - Price breakdown
  - Cancellation policy;

:User enters contact information;
:User specifies special requests;
note right
  <color:#2C3E50><b>Optional Preferences</b></color>
  • Room location preferences
  • Bed configuration
  • Accessibility requirements
  • Early/late check-in/out
  • Dietary restrictions
end note

:User selects payment method;

if (Payment method?) then (Credit/Debit Card)
  :Display card entry form;
else if (Payment method?) then (Digital Wallet)
  :Redirect to wallet provider;
else (Pay at Hotel)
  :Require security deposit;
endif

|#FFEBEE|<color:#E74C3C><b>Pre-Booking Validation</b></color>|
fork
  :Re-verify room availability;
fork again
  :Calculate final pricing:
    + Base rate × nights
    + Taxes & fees
    + Optional services
    - Loyalty discounts;
fork again
  :Validate payment details;
fork again
  :Check user account standing;
fork again
  :Verify fraud prevention rules;
end fork

if (Validation failed?) then (yes)
  :Display validation failure reason;
  :Provide corrective actions;
  stop
else (no)
endif

if (Availability issue?) then (yes)
  :Display real-time
  availability update;
  :Suggest alternatives;
  stop
else if (Payment issue?) then (yes)
  :Display payment error
  with resolution steps;
  stop
else if (Security flag?) then (yes)
  :Flag for manual review;
  :Notify security team;
  stop
else (All checks passed)
endif

|#E8F5E9|<color:#2ECC71><b>Booking Creation</b></color>|
:User reviews & confirms booking;
:System creates booking record
with status "PENDING";
:Generate unique 8-digit
booking reference;
:Reserve room temporarily
(15-minute hold);

|#FFF3E0|<color:#F39C12><b>Payment Processing</b></color>|
:Connect to secure payment gateway;
:Process encrypted transaction;
:Wait for authorization response;

if (Payment successful?) then (no)
  |#FFEBEE|
  :Display declined message;
  :Update booking status
  to "PAYMENT_FAILED";
  :Release room reservation;
  :Log failed transaction;
  :Offer alternative methods;
  stop
else (yes)
  :Capture payment funds;
  :Store transaction ID;
endif

|#F1F8E9|<color:#27AE60><b>Post-Booking Processing</b></color>|
fork
  partition "Database Updates" {
    :Update booking status
    to "CONFIRMED";
    :Update room inventory;
    :Mark dates as unavailable;
    :Create payment record;
  }
fork again
  partition "Document Generation" {
    :Generate invoice PDF
    with hotel branding;
    :Create confirmation
    document;
    :Generate receipt;
  }
fork again
  partition "Loyalty Program" {
    :Calculate loyalty points
    based on spending;
    :Update user's point balance;
    :Record transaction;
  }
fork again
  partition "Notifications" {
    :Send booking confirmation
    email to guest;
    :Send internal notification
    to hotel staff;
    :Send housekeeping schedule;
    :Update front desk system;
  }
fork again
  partition "Audit & Analytics" {
    :Log booking in audit trail;
    :Update revenue reports;
    :Calculate occupancy rates;
    :Track booking source;
  }
end fork

|#F0F8FF|<color:#3498DB><b>Confirmation & Completion</b></color>|
:Display success confirmation page:
  - Booking confirmation number
  - Complete booking details
  - Payment receipt summary
  - Hotel contact information;

:Provide post-booking options:
  • Add to digital calendar
  • Download invoice & documents
  • View/manage booking
  • Book additional services;

:Display helpful information:
  - Check-in procedures
  - Hotel amenities
  - Local attractions
  - Transportation options;

stop

legend right
  | <color:#3498DB>█</color> | User Interaction |
  | <color:#27AE60>█</color> | Authentication |
  | <color:#F39C12>█</color> | Room Discovery |
  | <color:#E74C3C>█</color> | Validation |
  | <color:#2ECC71>█</color> | Selection/Creation |
  | <color:#9B59B6>█</color> | Cart Management |
  | **Process** | **Status** |
  | Completed | <color:#27AE60>█ Success</color> |
  | Failed | <color:#E74C3C>█ Error</color> |
  | Decision Point | <color:#3498DB>◇ Diamond</color> |
end legend

@enduml